{{ if (isset .Site.Params "favicon") }}
  {{ .Scratch.Set "favicon_path" .Site.Params.favicon }}
{{ else }}
  {{ .Scratch.Set "favicon_path" "images/badapple.ico" }}
{{ end }}

{{ $favicon_path := .Scratch.Get "favicon_path" }}
<link rel="icon" type="image/png" href="{{ $favicon_path }}" />